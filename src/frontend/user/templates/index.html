{% extends "base.html" %}

{% block content %}
<main>
    <link rel="stylesheet" href="/static/css/gallery.css">
    <div class="container index-container">
        <h2>{{ title }}</h2>
        <div id="dle-content">
            {% for manga in mangas %}
                <div class="gallery">
                    <a href="/manga/{{ manga.sku }}">
                        <img src={{ manga.poster }} alt={{ manga.title }}>
                        <div class="caption">
                            {{ manga.title }}
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>

    {% if total > 1 %}
    <div class="paginator">
        <ul class="pagination">
            {% if page_now > 1 %}
                <li>
                    <a href="?page={{ page_now - 1 }}" class="page-link prev" aria-label="Предыдущая">
                        <span>&laquo;</span>
                    </a>
                </li>
            {% endif %}

            {% for page in range(1, total + 1) %}
                {% if page == page_now %}
                    <li><span class="page-link current">{{ page }}</span></li>
                {% elif page == 1 or page == total or (page >= page_now - 2 and page <= page_now + 2) %}
                    <li><a href="?page={{ page }}" class="page-link">{{ page }}</a></li>
                {% elif page == page_now - 3 or page == page_now + 3 %}
                    <li><span class="page-link ellipsis">...</span></li>
                {% endif %}
            {% endfor %}

            {% if page_now < total %}
                <li>
                    <a href="?page={{ page_now + 1 }}" class="page-link next" aria-label="Следующая">
                        <span>&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
        <div class="page-info">
            Страница {{ page_now }} из {{ total }}
        </div>
    </div>
    {% endif %}
</main>
{% endblock %}